<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.enjoy.users.dao.SysDictDataMapper">
  <resultMap id="BaseResultMap" type="cn.enjoy.sys.model.SysDictData">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="type" jdbcType="VARCHAR" property="type" />
    <result column="code" jdbcType="VARCHAR" property="code" />
    <result column="cname" jdbcType="VARCHAR" property="cname" />
    <result column="ename" jdbcType="VARCHAR" property="ename" />
    <result column="default_value" jdbcType="INTEGER" property="defaultValue" />
    <result column="valid" jdbcType="INTEGER" property="valid" />
    <result column="parent_id" jdbcType="VARCHAR" property="parentId" />
    <result column="RESV1" jdbcType="VARCHAR" property="resv1" />
    <result column="RESV2" jdbcType="VARCHAR" property="resv2" />
    <result column="sort_no" jdbcType="INTEGER" property="sortNo" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    id, type, code, cname, ename, default_value, valid, parent_id, RESV1, RESV2, sort_no
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from sys_dict_data
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    delete from sys_dict_data
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="cn.enjoy.sys.model.SysDictData">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    insert into sys_dict_data (id, type, code, 
      cname, ename, default_value, 
      valid, parent_id, RESV1, 
      RESV2, sort_no)
    values (#{id,jdbcType=VARCHAR}, #{type,jdbcType=VARCHAR}, #{code,jdbcType=VARCHAR}, 
      #{cname,jdbcType=VARCHAR}, #{ename,jdbcType=VARCHAR}, #{defaultValue,jdbcType=INTEGER}, 
      #{valid,jdbcType=INTEGER}, #{parentId,jdbcType=VARCHAR}, #{resv1,jdbcType=VARCHAR}, 
      #{resv2,jdbcType=VARCHAR}, #{sortNo,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="cn.enjoy.sys.model.SysDictData">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    insert into sys_dict_data
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="code != null">
        code,
      </if>
      <if test="cname != null">
        cname,
      </if>
      <if test="ename != null">
        ename,
      </if>
      <if test="defaultValue != null">
        default_value,
      </if>
      <if test="valid != null">
        valid,
      </if>
      <if test="parentId != null">
        parent_id,
      </if>
      <if test="resv1 != null">
        RESV1,
      </if>
      <if test="resv2 != null">
        RESV2,
      </if>
      <if test="sortNo != null">
        sort_no,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="code != null">
        #{code,jdbcType=VARCHAR},
      </if>
      <if test="cname != null">
        #{cname,jdbcType=VARCHAR},
      </if>
      <if test="ename != null">
        #{ename,jdbcType=VARCHAR},
      </if>
      <if test="defaultValue != null">
        #{defaultValue,jdbcType=INTEGER},
      </if>
      <if test="valid != null">
        #{valid,jdbcType=INTEGER},
      </if>
      <if test="parentId != null">
        #{parentId,jdbcType=VARCHAR},
      </if>
      <if test="resv1 != null">
        #{resv1,jdbcType=VARCHAR},
      </if>
      <if test="resv2 != null">
        #{resv2,jdbcType=VARCHAR},
      </if>
      <if test="sortNo != null">
        #{sortNo,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="cn.enjoy.sys.model.SysDictData">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    update sys_dict_data
    <set>
      <if test="type != null">
        type = #{type,jdbcType=VARCHAR},
      </if>
      <if test="code != null">
        code = #{code,jdbcType=VARCHAR},
      </if>
      <if test="cname != null">
        cname = #{cname,jdbcType=VARCHAR},
      </if>
      <if test="ename != null">
        ename = #{ename,jdbcType=VARCHAR},
      </if>
      <if test="defaultValue != null">
        default_value = #{defaultValue,jdbcType=INTEGER},
      </if>
      <if test="valid != null">
        valid = #{valid,jdbcType=INTEGER},
      </if>
      <if test="parentId != null">
        parent_id = #{parentId,jdbcType=VARCHAR},
      </if>
      <if test="resv1 != null">
        RESV1 = #{resv1,jdbcType=VARCHAR},
      </if>
      <if test="resv2 != null">
        RESV2 = #{resv2,jdbcType=VARCHAR},
      </if>
      <if test="sortNo != null">
        sort_no = #{sortNo,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="cn.enjoy.sys.model.SysDictData">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 14 11:21:53 CST 2016.
    -->
    update sys_dict_data
    set code = #{code,jdbcType=VARCHAR},
      cname = #{cname,jdbcType=VARCHAR},
      ename = #{ename,jdbcType=VARCHAR},
      default_value = #{defaultValue,jdbcType=INTEGER},
      valid = #{valid,jdbcType=INTEGER},
      parent_id = #{parentId,jdbcType=VARCHAR},
      RESV1 = #{resv1,jdbcType=VARCHAR},
      RESV2 = #{resv2,jdbcType=VARCHAR},
      sort_no = #{sortNo,jdbcType=INTEGER}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  
  <select id="queryDictDataByType" parameterType="java.lang.String" resultMap="BaseResultMap">
	       SELECT
				d.cname,d.`code`,d.default_value,d.ename,d.id,d.parent_id,d.RESV1,d.RESV2,d.sort_no,d.type,d.valid
			FROM
				sys_dict_data d
			where valid=1 and type=#{0}
	        order by sort_no
	</select>

    <select id="queryDictDataByCode" parameterType="java.lang.String" resultMap="BaseResultMap">
        SELECT
        d.cname,d.`code`,d.default_value,d.ename,d.id,d.parent_id,d.RESV1,d.RESV2,d.sort_no,d.type,d.valid
        FROM
        sys_dict_data d
        where 1=1  and code=#{code}
        order by sort_no
    </select>
	
	<select id="querySelectModelByType" parameterType="java.lang.String" resultType="cn.enjoy.sys.model.SelectModel">
		select code 'key',cname value from sys_dict_data where valid=1 and type=#{type} order by sort_no
	</select>
	
	<select id="queryAllDictData" resultMap="BaseResultMap">
		select 
	       <include refid="Base_Column_List" />
	       from sys_dict_data where valid=1 order by sort_no
	</select>

	<select id="queryDictDataById" parameterType="java.lang.String" resultMap="BaseResultMap">
		select
	       <include refid="Base_Column_List" />
	       from sys_dict_data where valid=1 and id=#{id} 
	</select>
    <!-- 根据字典type查询 并且 RESV1 升序排序 -->
    <select id="queryDictDataByTypeAndORDER" parameterType="map" resultMap="BaseResultMap">
      select
      <include refid="Base_Column_List" />
      from sys_dict_data
        where
          type = #{type,jdbcType=VARCHAR}
         and valid = 1
         ORDER BY sort_no ASC
    </select>
    
    
    
     <insert id="insertDicData"  parameterType="java.util.List">
    insert into sys_dict_data (id, type, code, 
      cname, ename, default_value, 
      valid, parent_id, RESV1, 
      RESV2)
    values 
     <foreach collection="list" index="index" item="item" separator=","> 
		   (
		   #{item.id,jdbcType=VARCHAR}, 
		   #{item.type,jdbcType=VARCHAR}, 
		   #{item.code,jdbcType=VARCHAR}, 
     	   #{item.cname,jdbcType=VARCHAR}, 
     	   #{item.ename,jdbcType=VARCHAR}, 
     	   #{item.defaultValue,jdbcType=INTEGER}, 
      	   #{item.valid,jdbcType=INTEGER}, 
      	   #{item.parentId,jdbcType=VARCHAR},
      	   #{item.resv1,jdbcType=VARCHAR}, 
      	   #{item.resv2,jdbcType=VARCHAR})
      </foreach>
  </insert>
  
  <select id="queryDictDataByTypeAndCode" parameterType="java.lang.String" resultMap="BaseResultMap">
		select
	       <include refid="Base_Column_List" />
	       from sys_dict_data where valid=1 
	       AND type = #{0}
		   AND code = #{1}	
	</select>
	<select id="queryDataByCode" parameterType="java.lang.String" resultMap="BaseResultMap">
		SELECT
			dd.`code` code,
			dd.cname cname,
			dd.RESV1 resv1
		FROM
			sys_dict_data dd
		INNER JOIN sys_dict_data d ON dd.id = d.parent_id
		WHERE
			d.type = 'LOGISTICS_APPLY_TYPE'
		AND dd.valid = '1'
		AND d.`code` = #{code}
	</select>
	<select id="getCodeByTypeAndResv1" parameterType="java.lang.String" resultMap="BaseResultMap">
		SELECT * FROM sys_dict_data WHERE valid = '1' AND type = 'LOGISTICS_APPLY_STATUS' AND RESV1 = #{RESV1}
	</select>

    <select id="queryAllDictDataPage" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        d.id, d.type, d.code, d.cname, d.ename, d.default_value, d.valid, d.parent_id, d.RESV1, d.RESV2, d.sort_no
        from sys_dict_data d where 1=1 and d.type = #{type,jdbcType=VARCHAR}

        <if test="param != null and param != ''">
            and
            (
            d.name LIKE CONCAT('%',#{param},'%') or
            d.code LIKE CONCAT('%',#{param},'%') or
            d.description LIKE CONCAT('%',#{param},'%')
            )
        </if>

    </select>


    <delete id="deleteByIds" parameterType="java.util.List">
        delete from sys_dict_data where id in
        <foreach item="itemId" collection="list" open="(" separator="," close=")">
            #{itemId}
        </foreach>
    </delete>

</mapper>